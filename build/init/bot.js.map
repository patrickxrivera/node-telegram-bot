{"version":3,"sources":["../../src/init/bot.js"],"names":["initBot","isProdEnv","Prod","init","Dev","process","env","NODE_ENV","Bot","token","setToken","setupBot","bot","polling","setWebHook","HEROKU_URL","Object","setPrototypeOf"],"mappings":";;;;;;;AAAA;;;;;;AAEA,IAAMA,UAAU,SAAVA,OAAU;AAAA,SAAOC,cAAcC,KAAKC,IAAL,EAAd,GAA4BC,IAAID,IAAJ,EAAnC;AAAA,CAAhB;;AAEA,IAAMF,YAAY,SAAZA,SAAY;AAAA,SAAMI,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA/B;AAAA,CAAlB;;AAEO,IAAMC,oBAAM;AACjBC,SAAO,IADU;AAEjBC,UAFiB,oBAERD,KAFQ,EAED;AACd,SAAKA,KAAL,GAAaJ,QAAQC,GAAR,CAAYG,KAAZ,CAAb;AACD;AAJgB,CAAZ;;AAOA,IAAML,oBAAM;AACjBD,MADiB,kBACV;AACL,SAAKO,QAAL,CAAc,WAAd;AACA,SAAKC,QAAL;AACA,WAAO,KAAKC,GAAZ;AACD,GALgB;AAMjBD,UANiB,sBAMN;AACT,SAAKC,GAAL,GAAW,iCAAgB,KAAKH,KAArB,EAA4B,EAAEI,SAAS,IAAX,EAA5B,CAAX;AACD;AARgB,CAAZ;;AAWA,IAAMX,sBAAO;AAClBC,MADkB,kBACX;AACL,SAAKO,QAAL,CAAc,YAAd;AACA,SAAKC,QAAL;AACA,WAAO,KAAKC,GAAZ;AACD,GALiB;AAMlBD,UANkB,sBAMP;AACT,SAAKC,GAAL,CAASE,UAAT,CAAoBT,QAAQC,GAAR,CAAYS,UAAZ,GAAyB,KAAKN,KAAlD;AACD;AARiB,CAAb;;AAWPO,OAAOC,cAAP,CAAsBb,GAAtB,EAA2BI,GAA3B;AACAQ,OAAOC,cAAP,CAAsBf,IAAtB,EAA4BM,GAA5B;;kBAEeR,O","file":"bot.js","sourcesContent":["import TelegramBot from 'node-telegram-bot-api';\n\nconst initBot = () => (isProdEnv() ? Prod.init() : Dev.init());\n\nconst isProdEnv = () => process.env.NODE_ENV === 'production';\n\nexport const Bot = {\n  token: null,\n  setToken(token) {\n    this.token = process.env[token];\n  }\n};\n\nexport const Dev = {\n  init() {\n    this.setToken('DEV_TOKEN');\n    this.setupBot();\n    return this.bot;\n  },\n  setupBot() {\n    this.bot = new TelegramBot(this.token, { polling: true });\n  }\n};\n\nexport const Prod = {\n  init() {\n    this.setToken('PROD_TOKEN');\n    this.setupBot();\n    return this.bot;\n  },\n  setupBot() {\n    this.bot.setWebHook(process.env.HEROKU_URL + this.token);\n  }\n};\n\nObject.setPrototypeOf(Dev, Bot);\nObject.setPrototypeOf(Prod, Bot);\n\nexport default initBot;\n"]}