{"version":3,"sources":["../../src/init/server.js"],"names":["app","use","json","get","req","res","version","server","listen","process","env","PORT","host","address","port","console","log","initServer","bot","post","token","processUpdate","body","sendStatus"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AACAA,IAAIC,GAAJ,CAAQ,qBAAWC,IAAX,EAAR;;AAEAF,IAAIG,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,MAAIH,IAAJ,CAAS,EAAEI,SAAS,kBAAYA,OAAvB,EAAT;AACD,CAFD;;AAIA,IAAIC,SAASP,IAAIQ,MAAJ,CAAWC,QAAQC,GAAR,CAAYC,IAAvB,EAA6B,SAA7B,EAAwC,YAAM;AACzD,MAAMC,OAAOL,OAAOM,OAAP,GAAiBA,OAA9B;AACA,MAAMC,OAAOP,OAAOM,OAAP,GAAiBC,IAA9B;AACAC,UAAQC,GAAR,CAAY,oCAAZ,EAAkDJ,IAAlD,EAAwDE,IAAxD;AACD,CAJY,CAAb;;AAMA,IAAMG,aAAa,SAAbA,UAAa,CAACC,GAAD,EAAS;AAC1BlB,MAAImB,IAAJ,CAAS,MAAMD,IAAIE,KAAnB,EAA0B,UAAChB,GAAD,EAAMC,GAAN,EAAc;AACtCa,QAAIG,aAAJ,CAAkBjB,IAAIkB,IAAtB;AACAjB,QAAIkB,UAAJ,CAAe,GAAf;AACD,GAHD;AAID,CALD;;kBAOeN,U","file":"server.js","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport packageInfo from '../../package.json';\n\nconst app = express();\napp.use(bodyParser.json());\n\napp.get('/', (req, res) => {\n  res.json({ version: packageInfo.version });\n});\n\nvar server = app.listen(process.env.PORT, '0.0.0.0', () => {\n  const host = server.address().address;\n  const port = server.address().port;\n  console.log('Web server started at http://%s:%s', host, port);\n});\n\nconst initServer = (bot) => {\n  app.post('/' + bot.token, (req, res) => {\n    bot.processUpdate(req.body);\n    res.sendStatus(200);\n  });\n};\n\nexport default initServer;\n"]}