{"version":3,"sources":["../../src/messages/sendRole.js"],"names":["sendRole","msg","bot","id","roleData","getRoleDataFrom","text","reply_markup","optns","sendMessage","req","role","getReplyMarkup","membersByRole","lastView","backBtn","inline_keyboard"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC7B,MAAMC,KAAK,wBAAUF,GAAV,CAAX;AACA,MAAMG,WAAWC,gBAAgBJ,IAAIK,IAApB,CAAjB;AAF6B,MAGrBA,IAHqB,GAGEF,QAHF,CAGrBE,IAHqB;AAAA,MAGfC,YAHe,GAGEH,QAHF,CAGfG,YAHe;;AAI7B,MAAMC,QAAQ,EAAED,0BAAF,EAAd;AACAL,MAAIO,WAAJ,CAAgBN,EAAhB,EAAoBG,IAApB,EAA0BE,KAA1B;AACD,CAND;;AAQO,IAAMH,4CAAkB,SAAlBA,eAAkB,CAACK,GAAD,EAAS;AACtC,MAAMC,OAAO,8BAAgBD,GAAhB,CAAb;AACA,MAAMJ,OAAO,uBAAYK,IAAZ,CAAb;AACA,MAAMJ,eAAeK,eAAeD,IAAf,CAArB;AACA,MAAMP,WAAW,EAAEE,UAAF,EAAQC,0BAAR,EAAjB;AACA,SAAOH,QAAP;AACD,CANM;;AAQP,IAAMQ,iBAAiB,SAAjBA,cAAiB,CAACD,IAAD,EAAU;AAC/B,MAAME,gBAAgB,sBAAiBF,IAAjB,4BAAtB;AACA,MAAMG,WAAW,OAAjB;AACA,MAAMC,UAAU,4BAAcD,QAAd,CAAhB;AACA,MAAME,+CAAsBH,aAAtB,sBAAwCE,OAAxC,EAAN;AACA,MAAMR,eAAe,EAAES,gCAAF,EAArB;AACA,SAAOT,YAAP;AACD,CAPD;;kBASeP,Q","file":"sendRole.js","sourcesContent":["import surveyResponses from '../data/surveyResponses.js';\nimport getMembersByRole from '../search/byRole.js';\nimport { getIdFrom, getSelectedRole, getBackBtnFor } from '../utils/helpers.js';\nimport { getRoleText } from '../utils/text.js';\n\nconst sendRole = (msg, bot) => {\n  const id = getIdFrom(msg);\n  const roleData = getRoleDataFrom(msg.text);\n  const { text, reply_markup } = roleData;\n  const optns = { reply_markup };\n  bot.sendMessage(id, text, optns);\n};\n\nexport const getRoleDataFrom = (req) => {\n  const role = getSelectedRole(req);\n  const text = getRoleText(role);\n  const reply_markup = getReplyMarkup(role);\n  const roleData = { text, reply_markup };\n  return roleData;\n};\n\nconst getReplyMarkup = (role) => {\n  const membersByRole = getMembersByRole(role, surveyResponses);\n  const lastView = 'start';\n  const backBtn = getBackBtnFor(lastView);\n  const inline_keyboard = [...membersByRole, ...backBtn];\n  const reply_markup = { inline_keyboard };\n  return reply_markup;\n};\n\nexport default sendRole;\n"]}